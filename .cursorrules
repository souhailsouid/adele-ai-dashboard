# R√®gles de Contexte pour le Projet (Optimisation des Tokens)

## Profil du Projet
- **Framework:** Next.js 14+ (App Router)
- **Langage:** TypeScript
- **Auth:** AWS Cognito (via /lib/auth)
- **Infrastructure:** AWS Amplify
- **Domaine:** Dashboard de flux financiers (Unusual Whales API)

## Directives d'Efficacit√© (Token Saving)
1. **R√©ponses Succinctes:** Ne r√©√©cris jamais un fichier entier. Propose uniquement les blocs de code modifi√©s ou nouveaux.
2. **Priorit√© au Contexte:** R√©f√®re-toi toujours aux fichiers existants dans :
   - `/lib/api` pour la logique de fetch.
   - `/services` pour la logique m√©tier des alertes.
   - `/components` pour l'UI.
3. **Gestion des Imports:** Utilise toujours les alias de chemin (ex: `@/lib/...` ou `@/components/...`).
4. **Style de Code:** - Utilise des composants fonctionnels (Arrow Functions).
   - Favorise l'utilisation de `lucide-react` pour les ic√¥nes si d√©j√† install√©.
   - Tailwind CSS pour tout le styling.

## R√®gles M√©tier (Alertes & Flux)
- Les alertes de volume (Volume Spike) doivent suivre la logique de validation d√©finie dans `FLOW_ALERTS_API_VALIDATION.md`.
- Toute modification de l'API doit √™tre r√©percut√©e dans `baseClient.ts` pour garantir la coh√©rence des headers.

## Instructions pour Cursor
- Si une modification touche √† l'authentification, v√©rifie syst√©matiquement `AuthContext.tsx` avant de proposer un changement.
- Ne pas indexer les fichiers PDF ou les fichiers de logs volumineux dans les r√©ponses.
- Avant de g√©n√©rer du code, v√©rifie si une fonction similaire n'existe pas d√©j√† dans `flowAlertsService.ts`.

## üéØ Workflow de Signal Scoring (FMP + RSS)
- **Backend First:** Toute la logique d'agr√©gation FMP (Grades, Targets, Insiders) doit √™tre dans `/services/fmpService.ts`.
- **API Gateway V2:** Utilise les routes `aws_apigatewayv2_route` pour exposer ces donn√©es au frontend.
- **Principe de Scoring:** Impl√©mente une fonction `calculateTickerScore(symbol)` qui combine :
    - Upgrade/Downgrade (FMP Grades)
    - Upside vs Current Price (FMP Price Target)
    - Net Insider Buying (FMP Insider)
    - RSS Headlines (FinancialJuice)
- **Interdiction:** Ne g√©n√®re plus de fichiers .md de diagnostic. Si un test √©choue, propose un log `console.error` ou un script de test temporaire en `.ts`.